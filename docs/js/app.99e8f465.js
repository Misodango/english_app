(function(){"use strict";var e={5244:function(e,t,n){var s=n(3751),l=n(641);const a={id:"app"};function c(e,t,n,s,c,i){const o=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",a,[(0,l.bF)(o)])}var i={name:"App"},o=n(6262);const r=(0,o.A)(i,[["render",c]]);var u=r,d=n(5220);function f(e,t,n,s,a,c){const i=(0,l.g2)("v-card-title"),o=(0,l.g2)("v-btn"),r=(0,l.g2)("v-card-text"),u=(0,l.g2)("v-card"),d=(0,l.g2)("v-col"),f=(0,l.g2)("v-row"),p=(0,l.g2)("v-container");return(0,l.uX)(),(0,l.Wv)(p,{class:"fill-height",fluid:""},{default:(0,l.k6)((()=>[(0,l.bF)(f,{align:"center",justify:"center"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{cols:"12",sm:"8",md:"6"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{class:"elevation-12"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{class:"text-h5 text-center"},{default:(0,l.k6)((()=>t[0]||(t[0]=[(0,l.eW)(" 英語学習アプリへようこそ ")]))),_:1}),(0,l.bF)(r,null,{default:(0,l.k6)((()=>[t[3]||(t[3]=(0,l.Lk)("p",{class:"text-center"},"以下のオプションから選択してください：",-1)),(0,l.bF)(o,{onClick:c.startLesson,color:"primary",block:"",class:"mt-2"},{default:(0,l.k6)((()=>t[1]||(t[1]=[(0,l.eW)(" レッスンを始める ")]))),_:1},8,["onClick"]),(0,l.bF)(o,{onClick:c.settings,color:"secondary",block:"",class:"mt-2"},{default:(0,l.k6)((()=>t[2]||(t[2]=[(0,l.eW)(" 設定 ")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}n(4114);var p={name:"StartScreen",methods:{startLesson(){this.$router.push("/play")},settings(){this.$router.push("/settings")}}};const h=(0,o.A)(p,[["render",f]]);var m=h,v=n(33);const k={key:2},g={key:0},b={key:0},y={key:1};function _(e,t,n,s,a,c){const i=(0,l.g2)("v-select"),o=(0,l.g2)("v-card-title"),r=(0,l.g2)("v-chip"),u=(0,l.g2)("v-chip-group"),d=(0,l.g2)("v-card-text"),f=(0,l.g2)("v-card"),p=(0,l.g2)("v-btn"),h=(0,l.g2)("v-card-actions"),m=(0,l.g2)("v-alert"),_=(0,l.g2)("v-container");return(0,l.uX)(),(0,l.Wv)(_,null,{default:(0,l.k6)((()=>[t[8]||(t[8]=(0,l.Lk)("h1",null,"プレイ画面",-1)),(0,l.bF)(i,{modelValue:a.selectedLesson,"onUpdate:modelValue":[t[0]||(t[0]=e=>a.selectedLesson=e),c.onLessonSelect],items:a.lessons,"item-title":"name","item-value":"id",label:"単元を選択",class:"mb-4"},null,8,["modelValue","items","onUpdate:modelValue"]),a.currentSentence?((0,l.uX)(),(0,l.Wv)(f,{key:0},{default:(0,l.k6)((()=>[(0,l.bF)(o,null,{default:(0,l.k6)((()=>t[2]||(t[2]=[(0,l.eW)("文章を正しく並べ替えてください")]))),_:1}),(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:a.selectedWords,"onUpdate:modelValue":t[1]||(t[1]=e=>a.selectedWords=e),column:"",multiple:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.shuffledWords,(e=>((0,l.uX)(),(0,l.Wv)(r,{key:e,value:e},{default:(0,l.k6)((()=>[(0,l.eW)((0,v.v_)(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(f,null,{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.eW)("あなたの回答")]))),_:1}),(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.bF)(u,{column:"",multiple:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.selectedWords,(e=>((0,l.uX)(),(0,l.Wv)(r,{key:e,value:e},{default:(0,l.k6)((()=>[(0,l.eW)((0,v.v_)(e),1)])),_:2},1032,["value"])))),128))])),_:1})])),_:1}),a.currentSentence.length>0?((0,l.uX)(),(0,l.Wv)(h,{key:0},{default:(0,l.k6)((()=>[(0,l.bF)(p,{onClick:c.popString,color:"primary"},{default:(0,l.k6)((()=>t[4]||(t[4]=[(0,l.eW)(" 1つ戻る ")]))),_:1},8,["onClick"])])),_:1})):(0,l.Q3)("",!0),c.checkLength()?((0,l.uX)(),(0,l.Wv)(h,{key:1},{default:(0,l.k6)((()=>[(0,l.bF)(p,{onClick:c.checkAnswer,color:"primary"},{default:(0,l.k6)((()=>t[5]||(t[5]=[(0,l.eW)(" 回答を確認 ")]))),_:1},8,["onClick"])])),_:1})):(0,l.Q3)("",!0)])),_:1})):(0,l.Q3)("",!0),a.feedback?((0,l.uX)(),(0,l.Wv)(m,{key:1,type:a.feedbackType,class:"mt-4"},{default:(0,l.k6)((()=>[(0,l.eW)((0,v.v_)(a.feedback),1)])),_:1},8,["type"])):(0,l.Q3)("",!0),a.currentSentence?((0,l.uX)(),(0,l.CE)("div",k,[c.isCorrect()&&"success"===a.feedbackType?((0,l.uX)(),(0,l.CE)("div",g,[c.isEnd()?((0,l.uX)(),(0,l.CE)("div",b,[(0,l.bF)(p,{onClick:c.startScreen},{default:(0,l.k6)((()=>t[6]||(t[6]=[(0,l.Lk)("p",null,"終了",-1)]))),_:1},8,["onClick"])])):((0,l.uX)(),(0,l.CE)("div",y,[(0,l.bF)(p,{onClick:c.nextSentence,color:"secondary",class:"mt-4"},{default:(0,l.k6)((()=>t[7]||(t[7]=[(0,l.Lk)("p",null,"次の問題",-1)]))),_:1},8,["onClick"])]))])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)])),_:1})}var S=n(223),F=n(1884);const W={apiKey:"AIzaSyAeVPmP7Lh0m3snGIq2hvCDXL14lTD4heU",authDomain:"english-app-pbl.firebaseapp.com",projectId:"english-app-pbl",storageBucket:"english-app-pbl.appspot.com",messagingSenderId:"785647830769",appId:"1:785647830769:web:b7f7992317d088344acb50"};console.log("Firebase Config:",{apiKey:"1:785647830769:web:b7f7992317d088344acb50"});const C=(0,S.Wp)(W),L=(0,F.aU)(C);var w={name:"PlayScreen",data(){return{lessons:[],selectedLesson:null,sentences:[],currentSentence:null,shuffledWords:[],selectedWords:[],feedback:"",feedbackType:"info"}},async mounted(){await this.loadLessons(),this.loadSentences()},methods:{async loadLessons(){try{const e=(0,F.rJ)(L,"lessons"),t=await(0,F.GG)(e);this.lessons=t.docs.map((e=>({id:e.id,...e.data()})))}catch(e){console.error("Lessons読み込みエラー:",e)}},onLessonSelect(){const e=this.lessons.find((e=>e.id===this.selectedLesson));e&&(this.sentences=[...e.sentences],this.nextSentence())},loadSentences(){if(this.lessons.length>0){const e=this.lessons[this.lessons.length-1];this.sentences=[...e.sentences],this.nextSentence()}},nextSentence(){this.sentences.length>0?(this.currentSentence=this.sentences.pop(),this.shuffledWords=this.shuffleArray(this.currentSentence.split(",")),this.selectedWords=[],this.feedback="",this.feedbackType="info"):(this.currentSentence=null,this.feedback="すべての問題が終了しました。",this.feedbackType="success")},shuffleArray(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},isCorrect(){const e=this.currentSentence.split(",").join(" "),t=this.selectedWords.join(" ");return e===t},checkAnswer(){this.isCorrect()?(this.feedback="正解です！",this.feedbackType="success"):(this.feedback="😣残念．．．もう一度やってみよう！😣",this.feedbackType="error")},checkLength(){const e=this.currentSentence.split(",").join(" "),t=this.selectedWords.join(" ");return t.length==e.length},popString(){this.selectedWords.pop()},isEnd(){return 0===this.sentences.length},startScreen(){this.$router.push("/")}}};const X=(0,o.A)(w,[["render",_]]);var V=X;const x={class:"sentences-list"},T={class:"d-flex align-center"},E={class:"mr-2"},j={class:"preview-chips ml-8 mt-2"};function A(e,t,n,s,a,c){const i=(0,l.g2)("v-file-input"),o=(0,l.g2)("v-text-field"),r=(0,l.g2)("v-card-title"),u=(0,l.g2)("v-icon"),d=(0,l.g2)("v-btn"),f=(0,l.g2)("v-chip"),p=(0,l.g2)("v-card-text"),h=(0,l.g2)("v-spacer"),m=(0,l.g2)("v-card-actions"),k=(0,l.g2)("v-card"),g=(0,l.g2)("v-alert"),b=(0,l.g2)("v-container");return(0,l.uX)(),(0,l.Wv)(b,null,{default:(0,l.k6)((()=>[t[5]||(t[5]=(0,l.Lk)("h1",{class:"mb-4"},"設定画面",-1)),(0,l.bF)(i,{modelValue:a.file,"onUpdate:modelValue":t[0]||(t[0]=e=>a.file=e),label:"CSVファイルをアップロード",accept:".csv",onChange:c.handleFileUpload,class:"mb-4"},null,8,["modelValue","onChange"]),a.sentences.length>0?((0,l.uX)(),(0,l.Wv)(k,{key:0,class:"mb-4"},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(o,{modelValue:a.fileName,"onUpdate:modelValue":t[1]||(t[1]=e=>a.fileName=e),label:"単元名を入力",placeholder:"例: Unit1-Daily Life",class:"mb-2",density:"compact"},null,8,["modelValue"])])),_:1}),(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",x,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.sentences,((e,n)=>((0,l.uX)(),(0,l.CE)("div",{key:n,class:"sentence-item mb-4"},[(0,l.Lk)("div",T,[(0,l.Lk)("span",E,"問題 "+(0,v.v_)(n+1)+":",1),(0,l.bF)(o,{modelValue:a.sentences[n],"onUpdate:modelValue":e=>a.sentences[n]=e,density:"compact","hide-details":"",class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.bF)(d,{icon:"",variant:"text",color:"error",size:"large",class:"ml-2",onClick:e=>c.removeSentence(n)},{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>t[2]||(t[2]=[(0,l.eW)("mdi-delete")]))),_:1})])),_:2},1032,["onClick"])]),(0,l.Lk)("div",j,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.split(","),((e,t)=>((0,l.uX)(),(0,l.Wv)(f,{key:t,size:"small",class:"ma-1",color:"primary",variant:"outlined"},{default:(0,l.k6)((()=>[(0,l.eW)((0,v.v_)(e),1)])),_:2},1024)))),128))])])))),128))])])),_:1}),(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,{"prepend-icon":"mdi-plus",variant:"tonal",onClick:c.addNewSentence,class:"mr-2"},{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.eW)(" 新しい問題を追加 ")]))),_:1},8,["onClick"]),(0,l.bF)(h),(0,l.bF)(d,{"prepend-icon":"mdi-check",color:"primary",onClick:c.saveSentences,disabled:!c.isValidData},{default:(0,l.k6)((()=>t[4]||(t[4]=[(0,l.eW)(" 保存 ")]))),_:1},8,["onClick","disabled"])])),_:1})])),_:1})):(0,l.Q3)("",!0),a.message?((0,l.uX)(),(0,l.Wv)(g,{key:1,type:a.messageType,class:"mt-4",closable:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,v.v_)(a.message),1)])),_:1},8,["type"])):(0,l.Q3)("",!0)])),_:1})}var O={name:"SettingsScreen",data(){return{file:null,sentences:[],message:"",messageType:"info",fileName:""}},computed:{isValidData(){return""!==this.fileName.trim()&&this.sentences.length>0&&this.sentences.every((e=>""!==e.trim()))}},methods:{handleFileUpload(){if(this.file){const e=new FileReader;e.onload=e=>{const t=e.target.result;this.sentences=t.split("\n").filter((e=>""!==e.trim())).map((e=>e.trim())),this.file.name&&(this.fileName=this.file.name.replace(/\.csv$/,""))},e.readAsText(this.file)}},addNewSentence(){this.sentences.push("")},removeSentence(e){this.sentences.splice(e,1)},validateSentence(e){const t=e.split(",");return t.length>=2&&t.every((e=>""!==e.trim()))},async saveSentences(){if(!this.isValidData)return this.message="単元名と少なくとも1つの有効な問題が必要です。",void(this.messageType="error");try{const e=(0,F.rJ)(L,"lessons"),t=(0,F.P)(e,(0,F._M)("name","==",this.fileName)),n=await(0,F.GG)(t),s={name:this.fileName,sentences:this.sentences,createdAt:(new Date).toISOString()};if(n.empty)await(0,F.gS)(e,s);else{const e=n.docs[0].ref;await(0,F.mZ)(e,s)}this.message="文章が正常に保存されました。",this.messageType="success"}catch(e){this.message="保存中にエラーが発生しました。",this.messageType="error",console.error("保存エラー:",e)}}}};const U=(0,o.A)(O,[["render",A],["__scopeId","data-v-9494d84a"]]);var I=U;const N=[{path:"/",name:"Start",component:m},{path:"/play",name:"Play",component:V},{path:"/settings",name:"Settings",component:I}],P=(0,d.aE)({history:(0,d.LA)("/english_app/"),routes:N});var D=P,Q=(n(5524),n(4825)),K=n(2938),G=n(3379),M=(0,Q.$N)({components:K,directives:G});const $=(0,s.Ef)(u);$.use(D),$.use(M),$.mount("#app")}},t={};function n(s){var l=t[s];if(void 0!==l)return l.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,s,l,a){if(!s){var c=1/0;for(u=0;u<e.length;u++){s=e[u][0],l=e[u][1],a=e[u][2];for(var i=!0,o=0;o<s.length;o++)(!1&a||c>=a)&&Object.keys(n.O).every((function(e){return n.O[e](s[o])}))?s.splice(o--,1):(i=!1,a<c&&(c=a));if(i){e.splice(u--,1);var r=l();void 0!==r&&(t=r)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[s,l,a]}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,a,c=s[0],i=s[1],o=s[2],r=0;if(c.some((function(t){return 0!==e[t]}))){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(o)var u=o(n)}for(t&&t(s);r<c.length;r++)a=c[r],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},s=self["webpackChunkenglish_app"]=self["webpackChunkenglish_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],(function(){return n(5244)}));s=n.O(s)})();
//# sourceMappingURL=app.99e8f465.js.map